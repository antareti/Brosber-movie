<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brosber Movie — Видеоредактор нового поколения</title>
    
    <!-- Добавляем Tailwind CSS для современной стилизации новых элементов -->
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Общие стили и шрифт */
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Inter', Arial, sans-serif;
            height: 100%;
            color: #fff; /* Основной цвет текста остается белым для читаемости */
            overflow-x: hidden;
            scroll-behavior: smooth;
            cursor: default; /* Устанавливаем курсор по умолчанию */
        }

        /* Цветовая палитра: Оранжевый и темный */
        :root {
            --primary-color: #FF7F00; /* Более насыщенный оранжевый, ближе к огню */
            --secondary-color: #FFA500; /* Более яркий оранжевый для свечения */
            --dark-bg: rgba(10, 10, 10, 0.95); /* Еще темнее фон */
            --card-bg: rgba(20, 20, 20, 0.9); /* Темнее для карточек */
            --text-light: #eee; /* Очень светлый серый для основного текста */
            --fire-red: #FF4500; /* Красный для эффекта огня */
            --fire-yellow: #FFD700; /* Желтый для эффекта огня */
        }
        
        /* Конфигурация Tailwind для использования наших переменных */
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': 'var(--primary-color)',
                        'secondary': 'var(--secondary-color)',
                        'dark-bg': 'var(--dark-bg)',
                    },
                    boxShadow: {
                        'fire': '0 0 25px var(--primary-color), 0 0 40px var(--fire-red)',
                        'fire-hover': '0 0 40px var(--secondary-color), 0 0 60px var(--fire-yellow)',
                    }
                }
            }
        }

        /* Параллакс фон */
        body {
            /* Фоновое изображение с огненным акцентом */
            background: url('1.jpg') no-repeat center center fixed; /* Использование 1.jpg в качестве фона */
            background-size: cover;
            position: relative;
        }

        /* Оверлей для читаемости текста */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.85); /* Более плотный оверлей */
            z-index: -1;
        }

        a {
            text-decoration: none;
            color: var(--secondary-color); /* Ссылки ярче */
        }

        /* Хедер (Sticky) */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
            background-color: var(--dark-bg);
            border-bottom: 2px solid var(--primary-color); /* Толще граница */
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
        }

        header h1 {
            color: var(--secondary-color);
            font-size: 1.9em; /* Чуть крупнее */
            letter-spacing: 2px;
            text-shadow: 0 0 8px var(--secondary-color), 0 0 15px var(--fire-red); /* Огненное свечение */
        }

        nav a {
            margin-left: 25px;
            font-weight: 500;
            transition: color 0.3s ease, text-shadow 0.3s ease;
            color: var(--text-light); /* Пункты меню по умолчанию светлые */
        }

        nav a:hover {
            color: var(--secondary-color);
            text-shadow: 0 0 15px var(--secondary-color), 0 0 25px var(--fire-yellow); /* Более сильное огненное свечение */
        }

        /* Главный блок (Hero) */
        .hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 85vh;
            text-align: center;
            padding: 60px 20px;
        }

        .hero h2 {
            font-size: 3.8em; /* Еще крупнее */
            margin-bottom: 25px;
            color: #fff;
            /* Эффект огненного текста */
            text-shadow: 
                0 0 10px #fff, 
                0 0 30px var(--secondary-color), 
                0 0 50px var(--fire-red);
            animation: fadeInDown 1s ease forwards;
        }

        .hero p {
            font-size: 1.5em; /* Крупнее */
            max-width: 700px;
            margin-bottom: 40px;
            color: var(--text-light);
            animation: fadeIn 1.5s ease forwards;
        }

        .download-btn {
            background-color: var(--primary-color);
            color: #000; /* Цвет текста кнопки черный */
            padding: 20px 45px; /* Больше padding */
            font-size: 1.4em; /* Крупнее шрифт */
            font-weight: 800; /* Более жирный */
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            /* Огненная тень для кнопки */
            box-shadow: 0 0 25px var(--primary-color), 0 0 40px var(--fire-red);
        }

        .download-btn:hover {
            transform: translateY(-7px) scale(1.08); /* Сильнее эффект при наведении */
            box-shadow: 0 0 40px var(--secondary-color), 0 0 60px var(--fire-yellow); /* Усиленное свечение */
            background-color: var(--secondary-color);
        }

        /* Видео-презентация */
        .video-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 80px 20px; /* Больше padding */
            background-color: rgba(0, 0, 0, 0.7); /* Темнее фон */
            border-top: 1px solid rgba(255, 127, 0, 0.2);
            border-bottom: 1px solid rgba(255, 127, 0, 0.2);
        }
        
        .video-container h3 {
            font-size: 2.2em;
            color: var(--secondary-color);
            margin-bottom: 35px;
            text-transform: uppercase;
            text-shadow: 0 0 12px var(--secondary-color), 0 0 20px var(--fire-red);
        }

        .video-wrapper {
            position: relative;
            max-width: 900px;
            width: 90%;
            border-radius: 20px;
            overflow: hidden;
            /* Огненная тень для видео */
            box-shadow: 0 0 40px rgba(255, 127, 0, 0.6);
        }

        .video-wrapper video {
            width: 100%;
            display: block;
            border: 8px solid var(--primary-color); /* Толще рамка */
            border-radius: 20px;
            transition: transform 0.5s;
        }

        /* 3D-текст */
        .video-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.8em; /* Крупнее */
            font-weight: 900;
            color: #fff;
            text-align: center;
            /* Интенсивное огненное свечение */
            text-shadow:
                0 0 20px #000,
                0 0 40px var(--primary-color),
                0 0 60px var(--fire-red);
            animation: floatText 3s ease-in-out infinite alternate;
            pointer-events: none;
        }

        /* Карточки функций */
        .features {
            padding: 100px 40px; /* Больше padding */
            text-align: center;
        }
        
        .features h2 {
            font-size: 2.8em;
            color: var(--secondary-color);
            margin-bottom: 10px; /* Уменьшаем отступ, так как добавили текст */
            text-shadow: 0 0 12px rgba(255, 165, 0, 0.6);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature-card {
            background-color: var(--card-bg);
            /* Огненная граница */
            border: 2px solid var(--primary-color);
            border-radius: 20px;
            padding: 35px; /* Больше padding */
            text-align: center;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            position: relative; /* Для псевдоэлемента огня */
            overflow: hidden;
        }

        /* Эффект горящего края для карточек */
        .feature-card::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 25px; /* Чуть больше радиус, чем у карточки */
            background: linear-gradient(45deg, var(--fire-red) 0%, var(--primary-color) 50%, var(--fire-yellow) 100%);
            z-index: -1;
            filter: blur(10px); /* Размытие для эффекта свечения */
            opacity: 0;
            transition: opacity 0.4s ease, filter 0.4s ease;
        }

        .feature-card:hover::before {
            opacity: 0.8;
            filter: blur(15px); /* Сильнее размытие при наведении */
        }

        .feature-card:hover {
            transform: translateY(-20px) scale(1.05); /* Сильнее эффект при наведении */
            /* Усиленная огненная тень */
            box-shadow: 0 15px 50px rgba(255, 127, 0, 0.8), 0 0 60px rgba(255, 69, 0, 0.6);
        }
        
        .feature-card .icon {
            color: var(--secondary-color);
            font-size: 3.5em; /* Крупнее иконки */
            margin-bottom: 25px;
            display: block;
            text-shadow: 0 0 10px var(--secondary-color), 0 0 20px var(--fire-red);
        }

        .feature-card h3 {
            margin-bottom: 12px;
            color: #fff;
            text-shadow: 0 0 8px var(--primary-color);
            font-size: 1.6em; /* Крупнее */
        }
        
        .feature-card p {
            color: var(--text-light);
        }

        /* Раздел с отзывами */
        .testimonials {
            padding: 100px 40px;
            background-color: rgba(0, 0, 0, 0.7);
            text-align: center;
            border-top: 1px solid rgba(255, 127, 0, 0.2);
        }
        
        .testimonials h2 {
            font-size: 2.8em;
            color: var(--secondary-color);
            margin-bottom: 60px;
            text-shadow: 0 0 12px rgba(255, 165, 0, 0.6);
        }

        .review-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .review-card {
            background-color: var(--card-bg);
            /* Огненная полоса */
            border-left: 6px solid var(--primary-color); 
            border-radius: 12px; /* Чуть более скругленные */
            padding: 30px; /* Больше padding */
            flex: 1 1 300px;
            text-align: left;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.7);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .review-card:hover {
            background-color: rgba(30, 30, 30, 0.9);
            /* Легкое огненное свечение при наведении */
            box-shadow: 0 5px 30px rgba(255, 127, 0, 0.4), 0 0 20px rgba(255, 69, 0, 0.2); 
        }

        .review-card p {
            font-style: italic;
            margin-bottom: 15px;
            color: var(--text-light); /* Основной текст отзывов светлый */
            line-height: 1.6;
        }
        
        .review-card .author {
            font-weight: bold;
            color: var(--secondary-color); /* Имя автора ярче */
            text-shadow: 0 0 5px var(--secondary-color);
        }

        /* Футер */
        footer {
            text-align: center;
            padding: 40px; /* Больше padding */
            background-color: var(--dark-bg);
            color: #999; /* Чуть светлее, чем #777 */
            border-top: 2px solid rgba(255, 127, 0, 0.2);
        }

        /* Кнопка "Наверх" */
        #backToTop {
            display: none;
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 999;
            background-color: var(--primary-color);
            color: #000;
            width: 60px; /* Крупнее */
            height: 60px; /* Крупнее */
            border-radius: 50%;
            text-align: center;
            line-height: 60px; /* Выравнивание по центру */
            font-size: 1.8em; /* Крупнее стрелка */
            cursor: pointer;
            /* Огненное свечение кнопки */
            box-shadow: 0 0 30px var(--primary-color), 0 0 20px var(--fire-red);
            transition: opacity 0.3s, transform 0.3s;
            opacity: 0.9;
        }
        
        #backToTop:hover {
            opacity: 1;
            transform: scale(1.15); /* Сильнее эффект при наведении */
            box-shadow: 0 0 40px var(--secondary-color), 0 0 30px var(--fire-yellow);
        }

        /* ---- НОВЫЕ СТИЛИ ---- */
        /* Курсор-трейл (Огненный след) */
        #cursor-trail-container {
            pointer-events: none; /* Игнорировать клики */
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999; /* Поверх всего */
        }
        .trail-dot {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--fire-red);
            border-radius: 50%;
            opacity: 0;
            /* Плавный переход для исчезновения */
            transition: transform 0.1s ease-out, opacity 0.1s ease-out, box-shadow 0.1s ease-out; 
            /* Огненное свечение */
            box-shadow: 0 0 5px var(--fire-yellow), 0 0 10px var(--fire-red);
        }
        /* ---- КОНЕЦ НОВЫХ СТИЛЕЙ ---- */

        /* Анимации */
        @keyframes fadeInDown {
            from {opacity: 0; transform: translateY(-40px);} /* Сильнее эффект */
            to {opacity: 1; transform: translateY(0);}
        }
        
        @keyframes fadeIn {
            from {opacity: 0;}
            to {opacity: 1;}
        }

        @keyframes floatText {
            0% { transform: translate(-50%, -50%) translateY(0) rotate(0deg); }
            50% { transform: translate(-50%, -50%) translateY(-15px) rotate(3deg); } /* Сильнее эффект */
            100% { transform: translate(-50%, -50%) translateY(0) rotate(-3deg); }
        }

        /* Адаптив */
        @media(max-width: 768px) {
            header {
                padding: 15px 20px;
            }
            header h1 {
                font-size: 1.6em;
            }
            nav a {
                margin-left: 10px;
                font-size: 0.9em;
            }
            .hero h2 {
                font-size: 2.8em;
            }
            .hero p {
                font-size: 1.2em;
            }
            .download-btn {
                padding: 15px 30px;
                font-size: 1.2em;
            }
            .video-text {
                font-size: 2em;
            }
            .features, .testimonials {
                padding: 50px 20px;
            }
            .feature-card {
                padding: 25px;
            }
            .feature-card .icon {
                font-size: 3em;
            }
            #backToTop {
                width: 50px;
                height: 50px;
                line-height: 50px;
                font-size: 1.5em;
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>

<!-- Элемент-контейнер для огненного следа курсора -->
<div id="cursor-trail-container"></div>

<header>
    <h1>Brosber Movie</h1>
    <nav>
        <a href="#features">Функции</a>
        <a href="#testimonials">Отзывы</a>
        <a href="#video">Презентация</a>
        <a href="#newsletter">Рассылка</a>
        <a href="#download">Скачать</a>
    </nav>
</header>

<section class="hero">
    <h2>Создавай видео как **огонь**</h2>
    <p>Brosber Movie — простой и мощный видеоредактор с 3D-анимацией, AI-инструментами и профессиональными эффектами. **Зажигай, твори, удивляй!**</p>
    <a id="download" href="https://drive.google.com/uc?export=download&id=1rQzml6BJf9D3tFgRzsfZ_cR7LN3uffGQ" target="_blank">
        <button class="download-btn">Скачать бесплатно</button>
    </a>
</section>

<section class="video-container" id="video">
    <h3>Посмотрите, что вы можете создать</h3>
    <div class="video-wrapper">
        <video controls poster="https://placehold.co/900x500/0A0A0A/FF7F00?text=Fiery+Video+Preview">
            <source src="1.mp4" type="video/mp4" onerror="this.parentNode.innerHTML='';">
            Ваш браузер не поддерживает видео.
        </video>
        <div class="video-text">Видео создано в Brosber Movie</div>
    </div>
</section>

<section class="features" id="features">
    <h2 class="mb-4">Почему Brosber Movie — ваш **горячий** выбор</h2>
    <!-- НОВАЯ ФИШКА 2: АНИМИРОВАННЫЙ СЧЕТЧИК -->
    <p class="text-xl md:text-3xl font-bold mb-12 text-gray-300">
        Уже <span id="counter" class="text-primary text-4xl md:text-5xl font-extrabold">0</span>+ креаторов **зажигают** с нами!
    </p>
    <div class="feature-grid">
        <div class="feature-card">
            <span class="icon">🚀</span>
            <h3>Продвинутые 3D-эффекты</h3>
            <p>Интеграция с передовыми движками позволяет добавлять плавные анимации, 3D-модели и визуальные эффекты без задержек.</p>
        </div>
        <div class="feature-card">
            <span class="icon">✨</span>
            <h3>AI-Инструменты</h3>
            <p>Автоматическое цветокоррекция, трекинг объектов и интеллектуальная нарезка с помощью искусственного интеллекта.</p>
        </div>
        <div class="feature-card">
            <span class="icon">💻</span>
            <h3>Оптимизированный интерфейс</h3>
            <p>Интуитивная работа с видео на таймлайне — все инструменты и настройки под рукой, идеально для новичков и профессионалов.</p>
        </div>
        <div class="feature-card">
            <span class="icon">✅</span>
            <h3>Высококачественный экспорт</h3>
            <p>Сохраняйте проекты в разрешении до 8K и оптимизируйте их для любой платформы (YouTube, TikTok и т.д.) быстро и легко.</p>
        </div>
    </div>
</section>


<section class="testimonials" id="testimonials">
    <h2>Нам доверяют креаторы, которые **зажигают**</h2>
    <div class="review-grid">
        <div class="review-card">
            <p>"Я был поражен, насколько быстро я смог освоить 3D-анимацию! Brosber Movie сократил время монтажа вдвое."</p>
            <div class="author">— Иван Петров, Видеодизайнер</div>
        </div>
        <div class="review-card">
            <p>"Идеально для контента в социальных сетях. AI-трекинг работает безупречно, а интерфейс просто летает."</p>
            <div class="author">— Алина Смирнова, Блогер</div>
        </div>
        <div class="review-card">
            <p>"Перешел с дорогого софта на Brosber Movie. Качество экспорта и набор эффектов не уступают, а цена в разы ниже."</p>
            <div class="author">— Сергей Ковальчук, Режиссер</div>
        </div>
    </div>
</section>

<!-- Новый раздел: Подписка на рассылку (Newsletter) -->
<section id="newsletter" class="py-16 md:py-24 bg-dark-bg text-center border-t-2 border-primary">
    <div class="max-w-3xl mx-auto px-4">
        <h2 class="text-3xl md:text-4xl font-extrabold text-secondary mb-4 shadow-fire">
            Оставайтесь на связи
        </h2>
        <p class="text-xl text-gray-300 mb-8">
            Подпишитесь на нашу **огненную рассылку**, чтобы первыми узнавать о новых функциях, обновлениях и эксклюзивных туториалах.
        </p>
        <form id="newsletter-form" class="flex flex-col md:flex-row gap-4 items-center justify-center">
            <input 
                type="email" 
                placeholder="Ваш Email" 
                required 
                class="w-full md:w-2/3 p-4 rounded-xl text-gray-900 bg-gray-100 border-2 border-transparent focus:border-primary focus:ring-4 focus:ring-primary focus:ring-opacity-50 transition-all shadow-md placeholder-gray-500"
                id="email-input"
            >
            <button 
                type="submit" 
                class="w-full md:w-1/3 download-btn !bg-secondary hover:!bg-primary text-black font-bold text-lg p-4 rounded-xl transition duration-300 shadow-fire hover:shadow-fire-hover"
            >
                Подписаться
            </button>
        </form>
        <!-- Оставим для временного сообщения об обработке -->
        <div id="message-box" class="mt-6 text-primary font-bold hidden"></div> 
    </div>
</section>
<!-- Конец нового раздела -->

<footer>
    &copy; 2025 Brosber Movie. Все права защищены.
</footer>


<div id="backToTop" onclick="window.scrollTo({top: 0, behavior: 'smooth'});">
    &#x25B2;
</div>

<!-- НОВАЯ ФИШКА 3: МОДАЛЬНОЕ ОКНО ДЛЯ УВЕДОМЛЕНИЙ -->
<div id="custom-modal" class="fixed inset-0 bg-black bg-opacity-80 z-[1001] hidden flex items-center justify-center transition-opacity duration-300 opacity-0" onclick="closeModal()">
    <div id="modal-content-wrapper" class="bg-card-bg p-8 rounded-2xl max-w-sm w-11/12 border-2 border-primary shadow-fire transform transition-all duration-300 scale-95" onclick="event.stopPropagation()">
        <div id="modal-icon" class="text-5xl mb-4 text-center"></div>
        <h4 id="modal-title" class="text-2xl font-bold mb-2 text-secondary text-center"></h4>
        <p id="modal-text" class="text-gray-300 mb-6 text-center"></p>
        <button onclick="closeModal()" class="w-full download-btn !bg-primary hover:!bg-secondary text-black text-base rounded-xl p-3">
            Закрыть
        </button>
    </div>
</div>

<script>
    // Инициализация переменных
    const body = document.body;
    const backToTopButton = document.getElementById('backToTop');
    const newsletterForm = document.getElementById('newsletter-form');
    const messageBox = document.getElementById('message-box');
    
    // Новые переменные для фишек
    const customModal = document.getElementById('custom-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalText = document.getElementById('modal-text');
    const modalIcon = document.getElementById('modal-icon');
    const counterElement = document.getElementById('counter');
    const featuresSection = document.getElementById('features');
    const trailContainer = document.getElementById('cursor-trail-container');
    
    // Флаг для анимации счетчика
    let counterAnimated = false;

    // 1. Улучшенный параллакс с помощью JS
    function handleScrollParallax() {
        const scrollTop = window.pageYOffset;
        body.style.backgroundPositionY = `calc(50% + ${scrollTop * 0.05}px)`;
    }
    
    // 2. Логика кнопки "Наверх"
    function handleBackToTop() {
        if (document.body.scrollTop > 500 || document.documentElement.scrollTop > 500) {
            backToTopButton.style.display = 'block';
        } else {
            backToTopButton.style.display = 'none';
        }
    }

    // НОВАЯ ФУНКЦИЯ: Показ кастомного уведомления (Модальное окно)
    function showNotification(title, message, icon, isSuccess = true) {
        modalTitle.textContent = title;
        modalText.textContent = message;
        modalIcon.innerHTML = icon;
        
        const contentWrapper = document.getElementById('modal-content-wrapper');

        // Стилизация в зависимости от успеха/ошибки
        if (isSuccess) {
            modalIcon.classList.remove('text-red-500');
            modalIcon.classList.add('text-secondary');
            contentWrapper.classList.remove('border-red-500', 'shadow-fire-error');
            contentWrapper.classList.add('border-primary', 'shadow-fire');
        } else {
            // Стиль ошибки
            modalIcon.classList.remove('text-secondary');
            modalIcon.classList.add('text-red-500');
            contentWrapper.classList.remove('border-primary', 'shadow-fire');
            contentWrapper.classList.add('border-red-500', 'shadow-fire-error');
        }
        
        // Показ модального окна с анимацией
        customModal.style.display = 'flex';
        setTimeout(() => {
            customModal.style.opacity = '1';
            contentWrapper.style.transform = 'scale(1)';
        }, 10);
    }

    function closeModal() {
        const contentWrapper = document.getElementById('modal-content-wrapper');
        customModal.style.opacity = '0';
        contentWrapper.style.transform = 'scale(0.95)';
        setTimeout(() => {
            customModal.style.display = 'none';
        }, 300);
    }

    // 3. Обработка подписки на рассылку (Теперь использует showNotification)
    function handleSubscription(event) {
        event.preventDefault();
        const emailInput = document.getElementById('email-input');
        const email = emailInput.value.trim();

        // Показываем сообщение о загрузке
        messageBox.textContent = 'Обработка подписки...';
        messageBox.classList.remove('hidden');
        messageBox.classList.add('text-secondary');
        messageBox.classList.remove('text-primary');

        // Имитация задержки отправки на сервер
        setTimeout(() => {
            messageBox.classList.add('hidden'); // Скрываем временное сообщение
            
            if (email && email.includes('@') && email.includes('.')) {
                showNotification(
                    'Подписка оформлена!',
                    `Спасибо, ${email} был добавлен в нашу огненную рассылку. Ждите новостей!`,
                    '🔥',
                    true
                );
                emailInput.value = ''; // Очистка поля
            } else {
                showNotification(
                    'Ошибка',
                    'Пожалуйста, введите корректный адрес электронной почты для подписки.',
                    '❌',
                    false
                );
            }
            messageBox.classList.remove('text-secondary');
        }, 1500);
    }

    // НОВАЯ ФУНКЦИЯ: Анимация счетчика
    function animateCounter() {
        const TARGET_NUMBER = 50000;
        const DURATION = 2500; // 2.5 секунды
        const startTimestamp = performance.now();
        
        const step = (timestamp) => {
            const elapsed = timestamp - startTimestamp;
            const progress = Math.min(1, elapsed / DURATION);
            const currentNumber = Math.floor(progress * TARGET_NUMBER);
            
            // Форматирование числа для русского языка (добавление пробелов)
            counterElement.textContent = currentNumber.toLocaleString('ru-RU');

            if (progress < 1) {
                requestAnimationFrame(step);
            } else {
                counterElement.textContent = TARGET_NUMBER.toLocaleString('ru-RU');
            }
        };
        requestAnimationFrame(step);
    }

    // Наблюдатель для запуска анимации счетчика при видимости секции
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            // Если секция стала видимой и анимация еще не запускалась
            if (entry.isIntersecting && !counterAnimated) {
                animateCounter();
                counterAnimated = true;
                counterObserver.unobserve(featuresSection);
            }
        });
    }, { threshold: 0.5 }); // Срабатывает, когда 50% секции видно


    // НОВАЯ ФУНКЦИЯ: Огненный след курсора
    const DOT_COUNT = 15;

    // Создание элементов (точек) для следа
    for (let i = 0; i < DOT_COUNT; i++) {
        const dot = document.createElement('div');
        dot.classList.add('trail-dot');
        dot.style.zIndex = 9999 - i; // Чем меньше индекс, тем выше z-index (ближе к курсору)
        trailContainer.appendChild(dot);
    }
    const dots = document.querySelectorAll('.trail-dot');

    let mouseX = 0;
    let mouseY = 0;

    // Обновляем координаты мыши
    document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
    });

    // Функция для анимации следа
    function updateTrail() {
        dots.forEach((dot, index) => {
            // Задержка основана на индексе
            const delay = index * 0.05; 
            const opacity = 1 - index / DOT_COUNT;

            // Применяем задержку и плавное позиционирование
            setTimeout(() => {
                // Плавное следование за предыдущей точкой (или курсором для первой)
                const targetX = index === 0 ? mouseX : parseFloat(dots[index - 1].style.left) + 5; // +5 для центровки
                const targetY = index === 0 ? mouseY : parseFloat(dots[index - 1].style.top) + 5; 
                
                // Устанавливаем позицию
                dot.style.left = `${targetX - 5}px`; // -5 для центровки
                dot.style.top = `${targetY - 5}px`;
                dot.style.opacity = opacity;
                dot.style.transform = `scale(${opacity * 0.8 + 0.2})`; // Чем дальше, тем меньше
            }, delay * 1000); 
        });

        requestAnimationFrame(updateTrail);
    }
    
    // Обработчик события скролла
    window.addEventListener('scroll', () => {
        handleScrollParallax();
        handleBackToTop();
    });
    
    // Добавляем обработчик на загрузку для первоначального состояния и запуска анимаций
    window.addEventListener('load', () => {
        handleScrollParallax();
        handleBackToTop(); 
        
        // Запуск наблюдателя для счетчика
        counterObserver.observe(featuresSection);
        
        // Запуск анимации следа курсора
        updateTrail();
    });

    // Добавляем обработчик отправки формы
    newsletterForm.addEventListener('submit', handleSubscription);
</script>
