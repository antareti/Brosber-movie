<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brosber Movie — Видеоредактор нового поколения</title>
    
    <!-- Добавляем Tailwind CSS для современной стилизации новых элементов -->
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <!-- Иконки (используем Lucide, чтобы добавить иконку огня в логотип) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* Общие стили и шрифт */
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Inter', Arial, sans-serif;
            height: 100%;
            color: #fff;
            overflow-x: hidden;
            scroll-behavior: smooth;
            cursor: default;
        }

        /* Цветовая палитра: Оранжевый и темный */
        :root {
            --primary-color: #FF7F00; /* Более насыщенный оранжевый, ближе к огню */
            --secondary-color: #FFA500; /* Более яркий оранжевый для свечения */
            --dark-bg: rgba(10, 10, 10, 0.95); /* Еще темнее фон */
            --card-bg: rgba(20, 20, 20, 0.9); /* Темнее для карточек */
            --text-light: #eee;
            --fire-red: #FF4500; /* Красный для эффекта огня */
            --fire-yellow: #FFD700; /* Желтый для эффекта огня */
        }
        
        /* Конфигурация Tailwind для использования наших переменных */
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': 'var(--primary-color)',
                        'secondary': 'var(--secondary-color)',
                        'dark-bg': 'var(--dark-bg)',
                    },
                    boxShadow: {
                        'fire': '0 0 25px var(--primary-color), 0 0 40px var(--fire-red)',
                        'fire-hover': '0 0 40px var(--secondary-color), 0 0 60px var(--fire-yellow)',
                    },
                    animation: {
                        'fire-pulse': 'firePulse 2s infinite ease-in-out',
                    }
                }
            }
        }

        /* Параллакс фон */
        body {
            /* Фоновое изображение с огненным акцентом */
            /* Используем placeholder в соответствии с правилами */
            background: url('https://placehold.co/1920x1080/000000/333333?text=Abstract+Dark+Background') no-repeat center center fixed;
            background-size: cover;
            position: relative;
        }

        /* Оверлей для читаемости текста */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.85); /* Более плотный оверлей */
            z-index: -1;
        }

        a {
            text-decoration: none;
            color: var(--secondary-color);
        }

        /* Хедер (Sticky) */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
            background-color: var(--dark-bg);
            border-bottom: 2px solid var(--primary-color);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
        }

        .logo-link {
            display: flex;
            align-items: center;
            text-decoration: none;
        }
        
        header h1 {
            color: var(--secondary-color);
            font-size: 1.9em;
            letter-spacing: 2px;
            text-shadow: 0 0 8px var(--secondary-color), 0 0 15px var(--fire-red);
        }

        /* Анимация логотипа */
        .logo-fire {
            animation: firePulse 2s infinite ease-in-out;
            margin-right: 10px;
        }

        @keyframes firePulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }
        
        /* Часы */
        #fire-clock {
            font-size: 1.2em;
            font-weight: 700;
            color: var(--fire-yellow);
            text-shadow: 0 0 8px var(--fire-red);
            padding: 5px 10px;
            border: 1px solid rgba(255, 127, 0, 0.5);
            border-radius: 8px;
            margin-right: 20px;
        }

        nav a {
            margin-left: 25px;
            font-weight: 500;
            transition: color 0.3s ease, text-shadow 0.3s ease;
            color: var(--text-light);
        }

        nav a:hover {
            color: var(--secondary-color);
            text-shadow: 0 0 15px var(--secondary-color), 0 0 25px var(--fire-yellow);
        }

        /* Главный блок (Hero) */
        .hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 85vh;
            text-align: center;
            padding: 60px 20px;
        }

        .hero h2 {
            font-size: 3.8em;
            margin-bottom: 25px;
            color: #fff;
            text-shadow: 0 0 10px #fff, 0 0 30px var(--secondary-color), 0 0 50px var(--fire-red);
            animation: fadeInDown 1s ease forwards, flicker 4s infinite alternate;
        }

        .hero p {
            font-size: 1.5em;
            max-width: 700px;
            margin-bottom: 40px;
            color: var(--text-light);
            animation: fadeIn 1.5s ease forwards;
        }

        .download-btn {
            /* Используем Tailwind для стилизации кнопки */
        }
        
        /* Видео-презентация */
        .video-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 80px 20px;
            background-color: rgba(0, 0, 0, 0.7);
            border-top: 1px solid rgba(255, 127, 0, 0.2);
            border-bottom: 1px solid rgba(255, 127, 0, 0.2);
        }
        
        .video-container h3 {
            font-size: 2.2em;
            color: var(--secondary-color);
            margin-bottom: 35px;
            text-transform: uppercase;
            text-shadow: 0 0 12px var(--secondary-color), 0 0 20px var(--fire-red);
        }

        .video-wrapper {
            position: relative;
            max-width: 900px;
            width: 90%;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(255, 127, 0, 0.6);
        }

        .video-wrapper video {
            width: 100%;
            display: block;
            border: 8px solid var(--primary-color);
            border-radius: 20px;
            transition: transform 0.5s;
        }

        .video-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.8em;
            font-weight: 900;
            color: #fff;
            text-align: center;
            text-shadow:
                0 0 20px #000,
                0 0 40px var(--primary-color),
                0 0 60px var(--fire-red);
            animation: floatText 3s ease-in-out infinite alternate;
            pointer-events: none;
        }

        /* Карточки функций и отзывов (общие стили для 3D) */
        .feature-card, .review-card {
            transform-style: preserve-3d;
            perspective: 1000px;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }
        
        .feature-card {
            background-color: var(--card-bg);
            border: 2px solid var(--primary-color);
            border-radius: 20px;
            padding: 35px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        /* Эффект горящего края для карточек */
        .feature-card::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 25px;
            background: linear-gradient(45deg, var(--fire-red) 0%, var(--primary-color) 50%, var(--fire-yellow) 100%);
            z-index: -1;
            filter: blur(10px);
            opacity: 0;
            transition: opacity 0.4s ease, filter 0.4s ease;
        }

        .feature-card:hover::before {
            opacity: 0.8;
            filter: blur(15px);
        }
        
        .feature-card:hover { 
            box-shadow: 0 15px 50px rgba(255, 127, 0, 0.8), 0 0 60px rgba(255, 69, 0, 0.6);
        }
        
        .feature-card .icon {
            color: var(--secondary-color);
            font-size: 3.5em;
            margin-bottom: 25px;
            display: block;
            text-shadow: 0 0 10px var(--secondary-color), 0 0 20px var(--fire-red);
        }

        /* Раздел с отзывами */
        .testimonials {
            padding: 100px 40px;
            background-color: rgba(0, 0, 0, 0.7);
            text-align: center;
            border-top: 1px solid rgba(255, 127, 0, 0.2);
        }
        
        .review-card {
            background-color: var(--card-bg);
            border-left: 6px solid var(--primary-color); 
            border-radius: 12px;
            padding: 30px;
            flex: 1 1 300px;
            text-align: left;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.7);
            transition: background-color 0.3s, box-shadow 0.3s, transform 0.4s ease;
        }

        /* Футер и кнопка Наверх - стили без изменений */
        
        /* ---- НОВЫЕ СТИЛИ ДЛЯ КУРСОРА ---- */
        #cursor-trail-container {
            pointer-events: none;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999;
        }
        .trail-dot {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--fire-red);
            border-radius: 50%;
            opacity: 0;
            transition: none; /* Убираем CSS transition, управляем через JS */
            box-shadow: 0 0 5px var(--fire-yellow), 0 0 10px var(--fire-red);
        }
        /* ---- КОНЕЦ НОВЫХ СТИЛЕЙ ---- */

        /* Анимации */
        @keyframes fadeInDown {
            from {opacity: 0; transform: translateY(-40px);}
            to {opacity: 1; transform: translateY(0);}
        }
        
        @keyframes fadeIn {
            from {opacity: 0;}
            to {opacity: 1;}
        }

        @keyframes floatText {
            0% { transform: translate(-50%, -50%) translateY(0) rotate(0deg); }
            50% { transform: translate(-50%, -50%) translateY(-15px) rotate(3deg); }
            100% { transform: translate(-50%, -50%) translateY(0) rotate(-3deg); }
        }

        /* Анимация мерцания заголовка */
        @keyframes flicker {
            0%, 18%, 22%, 25%, 53%, 57%, 100% {
                text-shadow: 
                    0 0 10px #fff, 
                    0 0 30px var(--secondary-color), 
                    0 0 50px var(--fire-red);
            }
            20%, 24%, 55% {      
                text-shadow: 
                    0 0 5px #fff, 
                    0 0 15px var(--fire-yellow), 
                    0 0 25px var(--primary-color);
            }
        }
        
        /* Стили для кнопки Наверх */
        #backToTop {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--primary-color);
            color: #000;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            text-align: center;
            line-height: 50px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 0 15px var(--primary-color), 0 0 25px var(--fire-red);
            transition: all 0.3s ease;
            display: none;
            z-index: 900;
        }
        #backToTop:hover {
            background-color: var(--secondary-color);
            box-shadow: 0 0 20px var(--secondary-color), 0 0 30px var(--fire-yellow);
            transform: scale(1.1);
        }


        /* Адаптив */
        @media(max-width: 1024px) {
            header { padding: 15px 20px; }
            nav a { margin-left: 15px; font-size: 0.9em; }
            
            .hero h2 { font-size: 2.5em; }
            .hero p { font-size: 1.2em; }

            #fire-clock {
                display: none;
            }
        }
    </style>
</head>
<body>

<!-- Элемент-контейнер для огненного следа курсора -->
<div id="cursor-trail-container"></div>

<header>
    <!-- Добавляем иконку огня -->
    <a href="#" class="logo-link">
        <i data-lucide="flame" class="text-secondary logo-fire" style="width: 32px; height: 32px;"></i>
        <h1>Brosber Movie</h1>
    </a>
    
    <div class="flex items-center">
        <!-- Огненные часы -->
        <div id="fire-clock"></div>
        <nav>
            <a href="#features">Функции</a>
            <a href="#testimonials">Отзывы</a>
            <a href="#video">Презентация</a>
            <a href="#newsletter">Рассылка</a>
            <a href="#download">Скачать</a>
        </nav>
    </div>
</header>

<section class="hero">
    <h2>Создавай видео как **огонь**</h2>
    <p>Brosber Movie — простой и мощный видеоредактор с 3D-анимацией, AI-инструментами и профессиональными эффектами. **Зажигай, твори, удивляй!**</p>
    <a id="download" href="https://drive.google.com/uc?export=download&id=1rQzml6BJf9D3tFgRzsfZ_cR7LN3uffGQ" target="_blank">
        <button class="download-btn bg-primary hover:bg-secondary text-black font-extrabold rounded-full transition-all duration-300 shadow-fire hover:shadow-fire-hover">
            Скачать бесплатно
        </button>
    </a>
</section>

<section class="video-container" id="video">
    <h3>Посмотрите, что вы можете создать</h3>
    <div class="video-wrapper">
        <video controls poster="https://placehold.co/900x500/0A0A0A/FF7F00?text=Fiery+Video+Preview">
            <source src="1.mp4" type="video/mp4" onerror="this.parentNode.innerHTML='<div class=&quot;video-text&quot; style=&quot;font-size: 1.5em;&quot;>Видео недоступно. Используйте placeholder.</div>';">
            Ваш браузер не поддерживает видео.
        </video>
        <div class="video-text">Видео создано в Brosber Movie</div>
    </div>
</section>

<!-- Обновленный раздел "Функции" с использованием Tailwind Grid -->
<section class="features py-20 px-4 md:px-10 text-center" id="features">
    <h2 class="text-3xl md:text-5xl font-extrabold text-white mb-4">Почему Brosber Movie — ваш **горячий** выбор</h2>
    <!-- АНИМИРОВАННЫЙ СЧЕТЧИК -->
    <p class="text-xl md:text-3xl font-bold mb-12 text-gray-300">
        Уже <span id="counter" class="text-primary text-4xl md:text-5xl font-extrabold">0</span>+ креаторов **зажигают** с нами!
    </p>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-7xl mx-auto">
        <div class="feature-card tilt-card">
            <span class="icon">🚀</span>
            <h3 class="text-xl font-bold text-secondary mb-3">Продвинутые 3D-эффекты</h3>
            <p class="text-gray-300">Интеграция с передовыми движками позволяет добавлять плавные анимации, 3D-модели и визуальные эффекты без задержек.</p>
        </div>
        <div class="feature-card tilt-card">
            <span class="icon">✨</span>
            <h3 class="text-xl font-bold text-secondary mb-3">AI-Инструменты</h3>
            <p class="text-gray-300">Автоматическое цветокоррекция, трекинг объектов и интеллектуальная нарезка с помощью искусственного интеллекта.</p>
        </div>
        <div class="feature-card tilt-card">
            <span class="icon">💻</span>
            <h3 class="text-xl font-bold text-secondary mb-3">Оптимизированный интерфейс</h3>
            <p class="text-gray-300">Интуитивная работа с видео на таймлайне — все инструменты и настройки под рукой, идеально для новичков и профессионалов.</p>
        </div>
        <div class="feature-card tilt-card">
            <span class="icon">✅</span>
            <h3 class="text-xl font-bold text-secondary mb-3">Высококачественный экспорт</h3>
            <p class="text-gray-300">Сохраняйте проекты в разрешении до 8K и оптимизируйте их для любой платформы (YouTube, TikTok и т.д.) быстро и легко.</p>
        </div>
    </div>
</section>

<!-- Обновленный раздел "Отзывы" с использованием Tailwind Grid -->
<section class="testimonials" id="testimonials">
    <h2 class="text-3xl md:text-5xl font-extrabold text-white mb-12">Нам доверяют креаторы, которые **зажигают**</h2>
    <div class="review-grid grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto px-4">
        <div class="review-card tilt-card">
            <p class="text-gray-200 text-lg mb-4">"Я был поражен, насколько быстро я смог освоить 3D-анимацию! Brosber Movie сократил время монтажа вдвое."</p>
            <div class="author text-primary font-semibold">— Иван Петров, Видеодизайнер</div>
        </div>
        <div class="review-card tilt-card">
            <p class="text-gray-200 text-lg mb-4">"Идеально для контента в социальных сетях. AI-трекинг работает безупречно, а интерфейс просто летает."</p>
            <div class="author text-primary font-semibold">— Алина Смирнова, Блогер</div>
        </div>
        <div class="review-card tilt-card">
            <p class="text-gray-200 text-lg mb-4">"Перешел с дорогого софта на Brosber Movie. Качество экспорта и набор эффектов не уступают, а цена в разы ниже."</p>
            <div class="author text-primary font-semibold">— Сергей Ковальчук, Режиссер</div>
        </div>
    </div>
</section>

<!-- Новый раздел: Подписка на рассылку (Newsletter) -->
<section id="newsletter" class="py-16 md:py-24 bg-dark-bg text-center border-t-2 border-primary">
    <div class="max-w-3xl mx-auto px-4">
        <h2 class="text-3xl md:text-4xl font-extrabold text-secondary mb-4 shadow-fire">
            Оставайтесь на связи
        </h2>
        <p class="text-xl text-gray-300 mb-8">
            Подпишитесь на нашу **огненную рассылку**, чтобы первыми узнавать о новых функциях, обновлениях и эксклюзивных туториалах.
        </p>
        <form id="newsletter-form" class="flex flex-col md:flex-row gap-4 items-center justify-center">
            <input 
                type="email" 
                placeholder="Ваш Email" 
                required 
                class="w-full md:w-2/3 p-4 rounded-xl text-gray-900 bg-gray-100 border-2 border-transparent focus:border-primary focus:ring-4 focus:ring-primary focus:ring-opacity-50 transition-all shadow-md placeholder-gray-500"
                id="email-input"
            >
            <button 
                type="submit" 
                class="w-full md:w-1/3 download-btn !bg-secondary hover:!bg-primary text-black font-bold text-lg p-4 rounded-xl transition duration-300 shadow-fire hover:shadow-fire-hover"
            >
                Подписаться
            </button>
        </form>
        <!-- Оставим для временного сообщения об обработке -->
        <div id="message-box" class="mt-6 text-primary font-bold hidden"></div> 
    </div>
</section>
<!-- Конец нового раздела -->

<footer class="text-center py-8 bg-black border-t border-primary/50 text-gray-400">
    &copy; 2025 Brosber Movie. Все права защищены.
</footer>


<div id="backToTop" onclick="window.scrollTo({top: 0, behavior: 'smooth'});">
    &#x25B2;
</div>

<!-- МОДАЛЬНОЕ ОКНО ДЛЯ УВЕДОМЛЕНИЙ -->
<div id="custom-modal" class="fixed inset-0 bg-black bg-opacity-80 z-[1001] hidden flex items-center justify-center transition-opacity duration-300 opacity-0" onclick="closeModal()">
    <div id="modal-content-wrapper" class="bg-card-bg p-8 rounded-2xl max-w-sm w-11/12 border-2 border-primary shadow-fire transform transition-all duration-300 scale-95" onclick="event.stopPropagation()">
        <div id="modal-icon" class="text-5xl mb-4 text-center"></div>
        <h4 id="modal-title" class="text-2xl font-bold mb-2 text-secondary text-center"></h4>
        <p id="modal-text" class="text-gray-300 mb-6 text-center"></p>
        <button onclick="closeModal()" class="w-full download-btn !bg-primary hover:!bg-secondary text-black text-base rounded-xl p-3">
            Закрыть
        </button>
    </div>
</div>

<script>
    // Инициализация переменных
    const body = document.body;
    const backToTopButton = document.getElementById('backToTop');
    const newsletterForm = document.getElementById('newsletter-form');
    const messageBox = document.getElementById('message-box');
    
    // Новые переменные для фишек
    const customModal = document.getElementById('custom-modal');
    const counterElement = document.getElementById('counter');
    const featuresSection = document.getElementById('features');
    const trailContainer = document.getElementById('cursor-trail-container');
    const tiltCards = document.querySelectorAll('.tilt-card');
    const fireClock = document.getElementById('fire-clock');
    
    // Флаг для анимации счетчика
    let counterAnimated = false;
    
    // 1. Улучшенный параллакс с помощью JS
    function handleScrollParallax() {
        const scrollTop = window.pageYOffset;
        body.style.backgroundPositionY = `calc(50% + ${scrollTop * 0.05}px)`;
    }
    
    // 2. Логика кнопки "Наверх"
    function handleBackToTop() {
        if (document.body.scrollTop > 500 || document.documentElement.scrollTop > 500) {
            backToTopButton.style.display = 'block';
        } else {
            backToTopButton.style.display = 'none';
        }
    }

    // 3. Показ кастомного уведомления (Модальное окно)
    function showNotification(title, message, icon, isSuccess = true) {
        document.getElementById('modal-title').textContent = title;
        document.getElementById('modal-text').textContent = message;
        document.getElementById('modal-icon').innerHTML = icon;
        
        const contentWrapper = document.getElementById('modal-content-wrapper');

        // Стилизация в зависимости от успеха/ошибки
        if (isSuccess) {
            document.getElementById('modal-icon').classList.remove('text-red-500');
            document.getElementById('modal-icon').classList.add('text-secondary');
            contentWrapper.classList.remove('border-red-500');
            contentWrapper.classList.add('border-primary');
        } else {
            // Стиль ошибки
            document.getElementById('modal-icon').classList.remove('text-secondary');
            document.getElementById('modal-icon').classList.add('text-red-500');
            contentWrapper.classList.remove('border-primary');
            contentWrapper.classList.add('border-red-500');
        }
        
        // Показ модального окна с анимацией
        customModal.style.display = 'flex';
        setTimeout(() => {
            customModal.style.opacity = '1';
            contentWrapper.style.transform = 'scale(1)';
        }, 10);
    }

    function closeModal() {
        const contentWrapper = document.getElementById('modal-content-wrapper');
        customModal.style.opacity = '0';
        contentWrapper.style.transform = 'scale(0.95)';
        setTimeout(() => {
            customModal.style.display = 'none';
        }, 300);
    }

    // 4. Обработка подписки на рассылку
    function handleSubscription(event) {
        event.preventDefault();
        const emailInput = document.getElementById('email-input');
        const email = emailInput.value.trim();

        messageBox.textContent = 'Обработка подписки...';
        messageBox.classList.remove('hidden');
        messageBox.classList.add('text-secondary');
        messageBox.classList.remove('text-primary');

        setTimeout(() => {
            messageBox.classList.add('hidden'); 
            
            if (email && email.includes('@') && email.includes('.')) {
                showNotification(
                    'Подписка оформлена!',
                    `Спасибо, ${email} был добавлен в нашу огненную рассылку. Ждите новостей!`,
                    '🔥',
                    true
                );
                emailInput.value = ''; // Очистка поля
            } else {
                showNotification(
                    'Ошибка',
                    'Пожалуйста, введите корректный адрес электронной почты для подписки.',
                    '❌',
                    false
                );
            }
            messageBox.classList.remove('text-secondary');
        }, 1500);
    }

    // 5. Анимация счетчика
    function animateCounter() {
        const TARGET_NUMBER = 50000;
        const DURATION = 2500; // 2.5 секунды
        const startTimestamp = performance.now();
        
        const step = (timestamp) => {
            const elapsed = timestamp - startTimestamp;
            const progress = Math.min(1, elapsed / DURATION);
            const currentNumber = Math.floor(progress * TARGET_NUMBER);
            
            counterElement.textContent = currentNumber.toLocaleString('ru-RU');

            if (progress < 1) {
                requestAnimationFrame(step);
            } else {
                counterElement.textContent = TARGET_NUMBER.toLocaleString('ru-RU');
            }
        };
        requestAnimationFrame(step);
    }

    // Наблюдатель для запуска анимации счетчика при видимости секции
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting && !counterAnimated) {
                animateCounter();
                counterAnimated = true;
                counterObserver.unobserve(featuresSection);
            }
        });
    }, { threshold: 0.5 }); 


    // 6. Огненный след курсора (Обновленная, более плавная и интерактивная версия)
    const DOT_COUNT = 15;
    for (let i = 0; i < DOT_COUNT; i++) {
        const dot = document.createElement('div');
        dot.classList.add('trail-dot');
        trailContainer.appendChild(dot);
    }
    const dots = document.querySelectorAll('.trail-dot');

    let mouseX = 0;
    let mouseY = 0;
    let trailPositions = Array.from({ length: DOT_COUNT }, () => ({ x: 0, y: 0 }));
    let isHoveringInteractive = false;

    document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
    });
    
    // Элементы, на которые должен реагировать курсор
    const interactiveElements = document.querySelectorAll('.download-btn, .tilt-card, nav a, #newsletter button');

    interactiveElements.forEach(el => {
        el.addEventListener('mouseenter', () => isHoveringInteractive = true);
        el.addEventListener('mouseleave', () => isHoveringInteractive = false);
    });

    function updateTrail() {
        // Интерполяция головы следа к позиции курсора (для плавности)
        trailPositions[0].x += (mouseX - trailPositions[0].x) * 0.2;
        trailPositions[0].y += (mouseY - trailPositions[0].y) * 0.2;

        dots.forEach((dot, index) => {
            if (index > 0) {
                // Интерполяция каждого следующего элемента к предыдущему
                trailPositions[index].x += (trailPositions[index - 1].x - trailPositions[index].x) * 0.4;
                trailPositions[index].y += (trailPositions[index - 1].y - trailPositions[index].y) * 0.4;
            }

            // Масштаб зависит от индекса и состояния наведения
            const baseScale = (1 - index / DOT_COUNT) * 0.8 + 0.2;
            const sizeScale = isHoveringInteractive ? 1.5 : baseScale;
            const opacity = isHoveringInteractive ? 1 : (1 - index / DOT_COUNT);

            dot.style.left = `${trailPositions[index].x - 5}px`;
            dot.style.top = `${trailPositions[index].y - 5}px`;
            dot.style.opacity = opacity;
            dot.style.transform = `scale(${sizeScale})`;
            
            // Динамическая смена цвета/тени при наведении
            if (isHoveringInteractive) {
                dot.style.backgroundColor = 'var(--fire-yellow)'; // Ярче
                dot.style.boxShadow = '0 0 10px var(--fire-yellow), 0 0 20px var(--primary-color)';
            } else {
                dot.style.backgroundColor = 'var(--fire-red)';
                dot.style.boxShadow = '0 0 5px var(--fire-yellow), 0 0 10px var(--fire-red)';
            }
        });

        requestAnimationFrame(updateTrail);
    }
    
    // 7. 3D-Наклон карточек
    function handleTilt(e) {
        const card = e.currentTarget;
        const rect = card.getBoundingClientRect();
        
        // Координаты мыши относительно центра карточки (от -1 до 1)
        const x = (e.clientX - rect.left) / rect.width; // 0..1
        const y = (e.clientY - rect.top) / rect.height; // 0..1

        const tiltX = (y - 0.5) * 20; // Угол наклона по X (-10 до 10 градусов)
        const tiltY = (x - 0.5) * -20; // Угол наклона по Y (-10 до 10 градусов), инвертируем для эффекта

        card.style.transform = `perspective(1000px) rotateX(${tiltX}deg) rotateY(${tiltY}deg) scale(1.05)`;
    }

    function resetTilt(e) {
        e.currentTarget.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) scale(1)';
    }

    function initTiltEffect() {
        tiltCards.forEach(card => {
            // Добавляем обработчики для тач-скринов, чтобы имитировать эффект наклона
            card.addEventListener('mousemove', handleTilt);
            card.addEventListener('mouseleave', resetTilt);
            card.addEventListener('touchmove', (e) => {
                 // Обработка только первого касания
                if (e.touches.length > 0) {
                    const touch = e.touches[0];
                    handleTilt({
                        currentTarget: card,
                        clientX: touch.clientX,
                        clientY: touch.clientY,
                    });
                }
            });
            card.addEventListener('touchend', resetTilt);
            card.addEventListener('touchcancel', resetTilt);
        });
    }

    // 8. Обновление времени
    function updateTime() {
        const now = new Date();
        // Используем опции для красивого формата времени
        const timeString = now.toLocaleTimeString('ru-RU', { 
            hour: '2-digit', 
            minute: '2-digit', 
            second: '2-digit'
        });
        fireClock.textContent = timeString;
    }
    
    // Обработчик события скролла
    window.addEventListener('scroll', () => {
        handleScrollParallax();
        handleBackToTop();
    });
    
    // Добавляем обработчик на загрузку для первоначального состояния и запуска анимаций
    window.addEventListener('load', () => {
        handleScrollParallax();
        handleBackToTop(); 
        
        // Запуск наблюдателя для счетчика
        counterObserver.observe(featuresSection);
        
        // Запуск анимации следа курсора
        updateTrail();
        
        // Инициализация 3D-наклона
        initTiltEffect();

        // Инициализация и запуск часов
        updateTime();
        setInterval(updateTime, 1000);
        
        // Инициализация иконок Lucide
        lucide.createIcons();
    });

    // Добавляем обработчик отправки формы
    newsletterForm.addEventListener('submit', handleSubscription);
</script>
